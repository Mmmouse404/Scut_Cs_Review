# 1误差

# 1.1误差的来源

科学研究、科学实验和工程技术中的实际问题经常要用数学工具解决，而用数学工具解决实际问题往往会产生误差.按误差产生的原因可以把误差分为四种：模型误差、观测误差、方法误差和舍人误差，

在使用数学工具解决实际问题的过程中，往往需要通过分析问题，抓住主要矛盾.抛开次要因素.建立起量与量之间的数学模型，数学模型是关于部分现实世界和为一种特殊目的而作的一个抽象的、简化的结构.它是近似的，必然会带来误差， 这种误差称为模型误差

在数学模型中通常包含一些观测数据，这些数据受观测仪器精度的限制，误差在所难免，这种误差称为观测误差

建立了数学模型之后，还要用数学方法求解数学模型.一般来说，数学模型是比较复杂的，不容易求出它的准确解，需要运用一套行之有效的近似方法来求解， 用近似方法得到的解与数学模型的准确解之间必然存在误差，这种误差称为方法误差，有时也称为截断误差，

有些数要用无穷多位小数来表示，例如$\pi$ ， $\sqrt{2},\frac13$ ，但只能保留有限位小数进行运算，也会产生误差，这种误差称为舍人误差

本书只讨论方法误差和舍人误差，

# 1.2误差、误差限和有效数字

1.2.0.1误差

定义1.1设准确值$x$ 的近似值为$x^{^{^{\prime}}}$ ，则近似值与准确值之间的差称为误差这个误差通常记为$e^{*}$ ，即

$$e^{'}=x^{'}-x$$

有时也记为$e(x^{*})$ .误差有时也称为绝对误差.

从(1.1)式可以看到，误差可能是正值，也可能是负值.当误差为正值时，说明近似值偏大，称为强近似；当误差为负值时，说明近似值偏小，称为弱近似

------------------------------------------------------------------

1.2.0.2误差限

一般情况下，准确值$x$ 是未知的，所以误差$e^{*}$ 的准确值求不出来.但有时可以根据具体测量或计算估计出误差的绝对值不可能超过某个正数，这个正数通常称为误差限，

定义1.2若$\mid e^{\cdot}\mid=\mid x^{\cdot}-x\mid\leqslant\varepsilon^{\cdot}$ x|≤8 $x\mid\leqslant\varepsilon^{\prime}$ ，则$E^{'}$ 称为近似值$x^{'}$ 的误差限.近似值$x^{'}$ 的误差限也记为$\varepsilon(x^{*})$ .

由于$\mid x^{*}-x\mid\leqslant\varepsilon^{*}$ ，所以$x^{*}$ x $x^{*}-\varepsilon^{*}\leq x\leq x^{*}+\varepsilon^{*}$ ，即$x\in\left[\begin{array}{c}x^{*}-\varepsilon^{*},x^{*}+\varepsilon\end{array}^{*}\right]$ ，也可以表示为$x=x^{°}\pm\varepsilon^{°}$ .因此，在日常生活中，通常用$x=x^{'}\pm\varepsilon^{'}$ 表示准确值$x$ 所在的范围和近似值$x^{-1}$ 的近似程度.

例1-1设用米尺测量某物体的长度，测得其长度为$835mm.$ 试求出该物体实际长度的范围，

解设该物体的实际长度为$x.$ 由米尺的精度可知，近似值$x^{*}$ 与准确值$x$ 之差的绝对值不会超过半个毫米，即有

$$\mid x^*-x\mid=\mid835-x\mid\leqslant\frac{1}{2}\:\mathrm{mm}$$

亦即834.5 mm$\leqslant x\leqslant835.5$ mm 或$x=835\pm0.5$mm

1.2.0.3有效数字

在引人有效数字的定义前，先看一下对数值进行四舍五人以后有什么规律，

当一个数值有很多位小数时，常常按四舍五人的原则取有限位来表示，

例如$\pi=3$ T =3 $\pi=3.14159265\cdots$

取3位数字得$x_3^*=3.14$ ：

$$e_{3}^{*}\:=x_{3}^{*}\:-\pi\approx-0.001\:6$$

取5位数字得$x_{s}^{*}=3.1416$ :

$$e_{5}^{*}=x_{5}^{*}-\pi\approx0.000\:007$$

取6位数字得$x_6^{^{^{\prime}}}=3$ $x_6^{^{^{\prime}}}=3$ $x_6^{^{^{\prime}}}=3.14159$ :

$$e_{6}^{'}=x_{6}^{'}-\pi=0.0000026$$

下面分析一下近似值的误差，看看能否发现有规律的东西，

$$\begin{array}{|ccc}3.&14-\pi&\approx0.&001&6<0.&005=\frac{1}{2}\times10\end{array}^{-2}$$

同理，可以得到

$$\begin{array}{|cc}3.&141&6-\pi&<\frac{1}{2}\times10\\\\|3.&141&59-\pi&<\frac{1}{2}\times10\end{array}^{-4}$$

从上面三个式子发现： $\pi$ 这个数经过四舍五人之后所得到的近似值，它的误差

------------------------------------------------------------------

限是它末位的半个单位，

可以证明：对任何数值经过四舍五人之后所得到的近似值，它的误差限是它末位的半个单位，

在数值分析中，为了更好地描述近似值的这种性质，特别引人了有效数字的定义.

定义1.3若近似值$x^{'}$ 的误差限为该值的某一位的半个单位，且从该位开始往左数到$x^{*}$ 的第一位非0数字共有$n$ 位，则称近似值$x^{*}$ 具有$n$ 位有效数字.

例如， $x_{3}^{* }$ =3. 14具有3位有效数字.这是因为

$$\begin{array}{c|c}|3.&14-\pi&<\frac{1}{2}\times10\end{array}^{-2}$$

即，近似值$x_3^*=3.14$ 与准确值$\pi$ 的误差限为小数点后第二位的半个单位，且从小数点第二位开始往左数到第一位非0数字“3"共有3位，

同理$, x_{s}^{* }$ =3. 141 6具有5位有效数字， $x_{6}^{* }$ =3. 141 59具有6位有效数字.

一般地，有这样的规律：凡是经过四舍五人得到的近似值，它的有效数字位等于从该近似值的末位开始往左数起到第一位非0数字的位数

例如，对0.045678小数点后第五位进行四舍五人后得0.0457，而从末位开始往左数到第一位非0数字共有3位，故0.0457具有3位有效数字，

又如，对8.0005的小数点后第三位进行四舍五人得到8.00，而从末位开始往左数到第一位非0数字共有3位，故8.00有3位有效数字

例1-2若$\pi$ 的近似值为$\pi^{\prime}=3.1415$ ，则$\pi^{*}$ 有多少位有效数字？

解因为

$$\begin{array}{|ccccc}3.&141&5-3.&141&592&65\cdots&|=0.&000&092&65\cdots<0.&000&5=\frac{1}{2}\times10\end{array}^{-3}$$

所以，近似值$\pi^{'}=3.1415$ 的误差限为该值小数点后第三位的半个单位.由有效数字的定义可知， $\pi^{'}$ 具有4位有效数字.

顺便指出，通常认为准确值具有无穷多位有效数字.

1.2.0.4有效数字与误差限的关系

从上面的例子可以粗略地知道，有效数字与误差限一样，也可以表达近似值的近似程度.那么，它们之间有没有关系？

设$x^{*}$ 为准确值$x$ 的近似值，且将$x^{n}$ 表示为

$$x^{^{\prime\prime}}=\:\pm0.\:\alpha_{1}\alpha_{2}\cdots\alpha_{n}\times10^{^{\prime}}$$

$p$ 为整数： $\alpha_1$ X $\alpha _{1}$ $, \alpha _{2}$ $, \cdots , \alpha _{n}$ 为$0\sim9$ 之间的数字，且$\alpha_1\neq0$ ，若有

$$\mid x^{*}-x\mid\leqslant\frac{1}{2}\times10^{*-n}$$

则近似值$x^{\prime}$ 具有$n$ 位有效数字.

------------------------------------------------------------------

实际上，可以把这段话看成有效数字的一个等价定义.按照这个定义，如果知道近似值的误差限，就可以知道它有多少位有效数字：反过来，如果知道近似值有多少位有效数字，就可以知道它的误差限是多少.

例1-3假设$x^{\prime}=0.0012345$ 是准确值$x$ 的具有5位有效数字的近似值， 则它的误差限为多少

解因为

$$x^{°}=0.0012345=0.12345\times10^{-2}$$

由此得到$p=-2.$ 所以有

$$\begin{array}{|cc}|\:x^{''}&-x\:|\leqslant\frac{1}{2}\times10^{-2\:-5}=\frac{1}{2}\times10^{-7}\end{array}$$

即$x^{*}$ 的误差限为×10-

例1-4利用有效数字与误差限的关系求解例1-2.

解由于

$$\mid3.\:141\:5-\pi\mid=0.\:000\:092\:65\cdots<0.\:000\:5=\frac{1}{2}\times10^{-3}$$

从而得到$p-n=-3$ .而

$$3.\:141\:5=0.\:314\:15\times10^{^{\prime}}\Rightarrow p=1$$

因此$n=4$ .即3.1415有4位有效数字.

# 1.3相对误差和相对误差限

1.3.0.1相对误差

误差和误差限在某些时候还不能完全反映近似值的近似程度.例如，某工厂有两个工人A和B，工人A每生产1000个零件就有一个次品，工人B每生产2000个零件也有一个次品.所以，这两个工人的误差都是1.那能不能说明这两个工人的技术水平一样高？显然是不能的，这是因为不能只看到次品的多少，还要看次品率.这两个工人的次品率分别为

A :

$$\frac{1\:000-999}{1\:000}=\frac{1}{1\:000}$$

$$\frac{2\:000-1999}{2\:000}=\frac{1}{2\:000}$$

B:

工人B的次品率比工人A的次品率低，说明工人B的技术水平高些.这启发我们在某些时候除了要看误差有多少外，还要考虑误差与准确值的比值的大小.误差与准确值的比值通常称为相对误差。

------------------------------------------------------------------

定义1.4若记e=-，则$e_{t}^{*}$ 称为$x^{^{*}}$ 的相对误差.近似值$x^{*}$ 的相对误差有时也记为$e_t(x^*)$

在实际计算中，准确值$x$ 一般是不知道的，分母中的$x$ 通常用近似值$x^{'}$ 代替， 即相对误差也定义为

$$e_{r}^{*}=\frac{x^{*}-x}{x^{*}}$$

1.3.0.2相对误差限

从相对误差的定义可以看到，由于准确值$x$ 一般是无法求出来的，所以不能直接计算相对误差的值.但有时近似值$x^{'}$ 的误差限可以求出来，从而可以利用误差限来定义相对误差限，

对（1.3）式两边取绝对值后得

$$\begin{array}{c|c}e_r^*&=&\frac{x^*-x}{x^*}\\\end{array}\leqslant\frac{\varepsilon^*}{\mid x^*\mid}$$

故相对误差限的定义如下.

定义 1.5若记$\varepsilon_{i}^{*}=\frac\varepsilon{\mid x^{\prime}\mid}$ 则$\varepsilon_{t}^{*}$ 称为近似值$x^{*}$ 的相对误差限.近似值$x^{*}$ 的相对误差限有时也记为$\varepsilon_{t}(x^{\prime})$

1.3.0.3相对误差限与有效数字的关系

相对误差限是利用误差限来定义的，而误差限与有效数字有一定关系，所以相对误差限也与有效数字有一定关系，

定理1.1若近似数$x^{\prime }$ = $\pm$ 0. $\alpha _{1}$ $\alpha _{2}\cdots \alpha _{n}\times 10^{\rho }$ 具有$n$ 位有效数字（ $n\leqslant m$ ），则其相对误差限为

$$\varepsilon^{^{\prime}}=\frac{\varepsilon^{^{\prime}}}{\mid x^{^{\prime}}\mid}\leqslant\frac{1}{2\alpha_{1}}\times10^{^{-(x-1)}}$$

证明据题意$,x^{*}$ 具有$n$ 位有效数字，所以按有效数字的等价定义有

$$\mid x^{*}-x\mid\leqslant\frac{1}{2}\times10^{*-n}$$

$$\mid e_{x}^{*}\mid=\frac{\mid x^{*}-x\mid}{\mid x^{*}\mid}\leqslant\frac{\frac{1}{2}\times10^{^{p-n}}}{\mid x^{*}\mid}=\varepsilon_{x}^{*}$$

从而

另一方面，对$x^{\prime}$ 求绝对值得
$$\begin{aligned}
&\text{1} \\
&\mid x^{+}\mid && =\mid\pm0.\:\alpha_{1}\alpha_{2}\cdots\alpha_{n}\times10^{p}\mid=\alpha_{1}.\:\alpha_{2}\cdots\alpha_{n}\times10^{p-1}  \\
&&&=\left(\begin{array}{c}{\alpha_{1}+0.}\\{\alpha_{2}\cdots\alpha_{s}}\\\end{array}\right)\times10^{s-1}\geqslant\alpha_{1}\times10^{s-1}
\end{aligned}$$

$$\varepsilon_{r}^{*}=\frac{\frac{1}{2}\times10^{p-n}}{\mid x^{*}\mid}\leq\frac{\frac{1}{2}\times10^{p-n}}{\alpha_{1}\times10^{p-1}}=\frac{1}{2\alpha_{1}}\times10^{-(n-1)}$$

于是

------------------------------------------------------------------

从这个定理可以看到，有效数字位越多，相对误差限就会越小.因此，在计算过程中应该尽量避免有效数字的损失，

如果已知近似值的有效数字位，可以使用公式（1.4)求出它的相对误差限，

例1-5已知用$\mathrm{e}^{{^{*}}}=2.718$ 来表示e=2.718 2 .具有4位有效数字，求$\mathrm{e}^{\text{“}}$ 的相对误差限.

解因为$n=4$ ，由公式(1.4)得

$$\varepsilon^{^{\prime}}\leqslant\frac{1}{2\times2}\times10^{^{-(4-1)}}=\frac{1}{4}\times10^{^{-3}}$$

所以e^的相对误差限为$\varepsilon_r^{\prime}=\frac14\times10^{-3}$

定理1.2若近似数$x^{* }= \pm 0.$ $\alpha _{1}$ $\alpha _{2}\cdots \alpha _{n}\times 10^{p}$ ，且相对误差限满足关系式

$$\varepsilon_{,}^{'}\leq\frac{1}{2\left(\:\alpha_{1}+1\:\right)}\times10^{-(\:\kappa-1\:)}$$

则$x^{*}$ 具有$n$ 位有效数字，

证明据有效数字的等价定义，要证明$x^{^{^{*}}}$ 具有$n$ 位有效数字，只需证明$x^{\prime}-x\mid\leqslant\frac12\times10^{\nu-\mu}$ 即可。

因为

$$\begin{aligned}
&\text{I} x^{^{*}}\:|\:=\:|\:\pm0.\:\alpha_{1}\alpha_{2}\cdots\alpha_{n}\:\times10^{^{*}}\:|\:=\alpha_{1}.\:\alpha_{2}\cdots\alpha_{n}\:\times10^{^{*-1}} \\
&&=(\begin{array}{cc}\alpha_1+0.&\alpha_2\cdots\alpha_n\end{array})\times10^{*-1}\leqslant(\begin{array}{c}\alpha_1+1\end{array})\times10^{*-1} \\
&\mid x^{*}-x\mid=\frac{\mid x^{*}\mid\mid x^{*}-x\mid}{\mid x^{*}\mid}\leqslant\mid x^{*}\mid\frac{\varepsilon^{*}}{\mid x^{*}\mid}=\mid x^{*}\mid\varepsilon, \\
&&&&\leq\mid x^{*}\mid\times\frac{1}{2\left(\:\alpha_{1}\:+1\:\right)}\times10^{-(\:x\:-\:1\:)}\leq\frac{1}{2}\times10^{\:x\:-\:n}
\end{aligned}$$

所以

从而证得$x^{*}$ 具有$n$ 位有效数字，

## 1.4数值运算中的误差估计

在计算一元函数$f($ $x$ ) 的值时，若用近似值$x^{^{*}}$ 代替准确值进行计算，则$f(x)$ 的值必定存在误差，

函数$f(x)$ 在$x^{n}$ 附近按泰勒公式展开得

$$f(x)=f(x^{*})\:+f^{\prime}(x^{*})\:(x-x^{*})\:+\frac{f^{\prime\prime}(\xi)}{2!}(\:x-x^{*}\:)^{2}$$

$\xi$ 在$x$ 和$x^{'}$ 之间.从而有

$$f(x)-f(x^{*})=f^{\prime}(x^{*})(x-x^{*})+\frac{f^{\prime\prime}(\xi)}{2!}(x-x^{*})^{2}$$

因为$(x-x^{*}$ ）相对其它量是一个高阶小量，舍去右边第二项得

------------------------------------------------------------------

$$f(x)-f(x^*)=f^*(x^*)(x-x^*)$$

即$f($ $x\:^{* })$ 的绝对误差

$$e(f(x^{*}))=f^{'}(x^{*})e(x^{*})$$

由(1.6)式可以得到$f(x^{*})$ 的相对误差

$$e_{r}(f(x^{*}))\approx\frac{f^{\prime}(x^{*})}{f(x^{*})}e(x^{*})$$

对（1.5)式两边取绝对值得
$$\begin{aligned}
&\text{1} \\
&|f(x)-f(x^{*})|&& =\:\left|f^{\prime}\left(\:x^{*}\right)\left(\:x-x^{*}\right)\:+\frac{f^{\prime\prime}\left(\:\xi\right)}{2\:!}\left(\:x-x^{*}\right)^{2}\right| \\
&&&\approx\:|f^{\prime}(\:x^{*})\:(\:x-x^{*})\:|\leqslant|f(\:x^{*})\:|\:\varepsilon(\:x^{*}) \\
&\text{LITET}
\end{aligned}$$

故$f($ $x\:^{* })$ 的误差限

$$\varepsilon(f(x^{*}))=\mid f^{\prime}(x^{*})\mid\varepsilon(x^{*})$$

而$f($ $x\:^{\prime })$ 的相对误差限

$$\varepsilon,(f(x^*))=\left|\frac{f^{\prime}(x^*)}{f(x^*)}\right|\varepsilon(x^*)$$

例1-6在计算球的体积时，为了使相对误差限为$1\%$ .问测量半径$r$ 允许的相对误差限为多少？

解计算球的体积公式为

$$V=f(\:r\:)\:=\frac{4}{3}\pi r^{3}$$

设体积$V$ 的近似值为$V^{*}$ ，半径$r$ 的近似值为$r^{'}$ ，则由（1.9）式得到相对误差限估计式为

$$\begin{aligned}\varepsilon_{,}(\:V^{*})&\approx\left|\frac{f^{\prime}(r^{*})}{f(r^{*})}\right|\varepsilon(r^{*})\\&=3\:\varepsilon_{,}(\:r^{*}\:)\leqslant1\%\end{aligned}$$

从而有$\varepsilon_{\iota}(r^{\prime})\leqslant\frac1{300}.$

这说明,测量半径$r$ 时允许的相对误差限为$:\frac1{300}$

在计算二元函数$f(x,y)$ 的值时，如果用近似值$x^{n}$ 代替准确值$x$ ，用近似值$y^{*}$ 代替准确值$y$ 进行计算，则$f(x,y)$ 的值也必然存在误差。

利用二元函数泰勒公式可以得到如下两个数的和、差、积与商的误差估计式：

------------------------------------------------------------------

$$\begin{aligned}
&&&e(\:x^{*}\:\pm y^{*}\:)\approx e(\:x^{*}\:)\:\pm e(\:y^{*}\:) \\
&&&e(x^{*}\cdot y^{*})=y^{*}e(x^{*})+x^{*}e(y^{*}) \\
&&&e\left[{\frac{x^{*}}{y^{*}}}\right]\approx{\frac{1}{y^{*}}}e\left(\:x^{*}\:\right)\:-{\frac{x^{*}}{\left(\:y^{*}\:\right)^{2}}}e\left(\:y^{*}\:\right)\quad(\:y^{*}\neq0\:) \\
&&&\varepsilon(\:x^{*}\:\pm y^{*}\:)\leq\varepsilon(\:x^{*}\:)\:+\varepsilon(\:y^{*}\:) \\
&&&\varepsilon(x^{*}y^{*})\leq\mid y^{*}\mid\varepsilon(x^{*})+\mid x^{*}\mid\varepsilon(y^{*}) \\
&\varepsilon\left[{\frac{x^{*}}{y^{*}}}\right]\leq{\frac{\mid y^{*}\mid\varepsilon(x^{*})\:+\:\mid x^{*}\mid\varepsilon(y^{*})}{\left(y^{*}\right)^{2}}}\quad(y^{*}\neq0) \\
&e_{r}(x^{*}+y^{*})\approx{\frac{x^{*}}{x^{*}+y^{*}}}e_{r}(x^{*})\:+{\frac{y^{*}}{x^{*}+y^{*}}}e_{r}(y^{*}) \\
&e_{,}(x^{^{*}}-y^{^{*}})\approx & \frac{x^{^{\prime}}}{x^{^{\prime}}-y^{^{\prime}}}e_{,}(x^{^{\prime}})\:-\frac{y^{^{\prime}}}{x^{^{\prime}}-y^{^{\prime}}}e_{,}(y^{^{\prime}}) \\
&e_{r}(\:x^{*}\:y^{*}\:)\approx e_{r}(\:x^{*}\:)\:+e_{r}(\:y^{*}\:) \\
&e_{r}\left[{\frac{x^{*}}{y^{*}}}\right]\approx e_{r}\left(\:x^{*}\:\right)-e_{r}\left(\:y^{*}\:\right)\quad(\:y^{*}\neq0\:)
\end{aligned}$$
e,(x+y)<e.(x)+e(y') 8,xyc,x+y
$$\varepsilon_{r}\Bigg[\:\frac{x^{*}}{y^{*}}\Bigg]\leqslant\varepsilon_{r}(\:x^{*}\:)\:+\varepsilon_{r}(\:y^{*}\:)\quad(\:y^{*}\neq0\:)$$
例1-7假定某长方形运动场的长为$x$ ，宽为$y$ ,并实地测得其长$x^{^{\prime}}=100.30$

m ，宽$y^{\prime}=80.50$m 若$x^{\prime}$ 和$y^{\prime}$ 的误差限都是0.005m ，试求其面积$S$ 的近似值$S^{\prime}$ 的误差限和相对误差限，

解据题意$,S=xy$ $,S=xy$ $, S= xy$ , | $x- x\:^{* }$ $| \leq 0. 005$ m ， $\mid y$ — $y^{\prime}\mid\leqslant0.005$m 由两个数的积的误差限估计式得
$$\begin{aligned}\varepsilon(S^{*})&=\varepsilon(\:x^{*}y^{*})\leqslant|\:y^{*}\:|\:\varepsilon(\:x^{*})\:+\:|\:x^{*}\:|\:\varepsilon(\:y^{*})\\&=80.50\times0.005+100.30\times0.005=0.904\:0\end{aligned}$$

由两个数的积的相对误差限估计式得
$$\begin{aligned}\text{molocalinininininininininininininininininininininininininininininininininininininininininininininininin}\\\varepsilon,(S^{*})&=\varepsilon,(x^{*}y^{*})\leqslant\varepsilon,(x^{*})+\varepsilon,(y^{*})\\&=\frac{0.005}{100.30}+\frac{0.005}{80.50}\approx0.000\:11\end{aligned}$$

假设多元函数$y= f($ $x_{1}$ $, x_{2}$ $, \cdots$ $, x_{0}$ ) $, y$ 的近似值为$y^{^{\prime}}$ x $x_1$ X2 $x_2$ $, x_{1}$ $, x_{2}$ $, \cdots$ $, x_{n}$ xx $x_{_{k}}$ 的近似值分别为$x_1^{*}$ $x_2^{*}$ .... $x_n^{*}$ ，则由多元函数泰勒展开式可以得到

------------------------------------------------------------------

$$\begin{aligned}
&e(\:y^{*}\:)\:=\:\sum_{i=1}^{*}\:\left[\:\frac{\partial f(\:x_{1}^{*}\:,x_{2}^{*}\:,\cdots,x_{n}^{*}\:)}{\partial x_{i}}\:\right]e(\:x_{i}^{*}\:) \\
&e_{r}(y^{*})\approx\left[\:\sum_{i=1}^{*}\:\left[\:\frac{\partial f(\:x_{1}^{*}\:,x_{2}^{*}\:,\cdots,x_{n}^{*}\:)}{\partial x_{i}}\right]e(\:x_{i}^{*}\:)\:\right]/y^{*} \\
&\varepsilon(\:y^{*}\:)\:=\:\sum_{i=1}^{*}\:\left|\:\frac{\partial f(\:x_{1}^{*}\:,x_{2}^{*}\:,\cdots,x_{0}^{*}\:)}{\partial x_{i}}\:\right|\:\varepsilon(\:x_{i}^{*}\:) \\
&\varepsilon_{i}(\:y^{*}\:)\leq\left[\:\sum_{i=1}^{n}\:\left|\:\frac{\partial f(\:x_{1}^{*}\:,x_{2}^{*}\:,\cdots,x_{n}^{*}\:)}{\partial x_{i}}\:\right|\varepsilon(\:x_{i}^{*}\:)\:\right]/\:|\:y^{*}\:|
\end{aligned}$$

# 1.5数值计算中应注意的一些问题

在利用计算机进行编程计算时，不要以为使用的计算公式或算法对了，编写的程序没有语法错误，就一定会得到正确的计算结果，因为在数值计算中几平每一步计算都存在误差，有时由于某一步计算的误差很大，有可能造成计算结果错误；或者虽然每一步计算的误差不是很大，但由于误差会传播，会积累，也有可能造成计算结果严重不可靠.

在数值计算中，为了得到正确的计算结果，需要注意下面几个问题，

1.5.0.1避免两个相近的数相减

由1.4节可知

$$\varepsilon_{r}(x^{*}-y^{*})\leqslant\frac{\varepsilon_{r}(x^{*})+\varepsilon_{r}(y^{*})}{\mid x^{*}-y^{*}\mid}$$

从上式可以看到，如果两个相近的数相减，则$\mid x^{*}$ — $y^{*}$ 较小，相对误差限就会较大，故有效数字位会大大减少.

因此，当遇到两个相近的数相减时，参与运算的数应当多保留几位有效数字， 或者变换原来的公式以避免这种情况的发生.

例1-8给定$f($ $x$ ) = 1 $- \cos x$ ，若使用计算器取4位有效数字计算$f($ 2°），应如何变换公式使有效数字位增加？

解使用计算器计算取4位有效数字得$\cos2^{\circ}=0.9994$ ，从而

$$f(2^{\circ})=1-\cos2^{\circ}\approx0.0006$$

由于

$$f(x)=1-\cos x=2\sin^2\frac{x}{2}$$

使用计算器取4位有效数字得$\sin 1^{\circ }= 0. 017$ 45 ，所以有

$$f(2^{\circ})=2\sin^{2}1^{\circ}=0.0006090$$

若使用计算机计算，有

$$f(2^{\circ})=1-\cos2^{\circ}\approx0.000609173$$

------------------------------------------------------------------

这说明变换公式后能使有效数字位由1位增加到3位，

1.5.0.2要防止小数被大数“吃掉”而使有效数字位损失

在数值计算中，如果两个参与计算的数相差太大，则小数有可能被大数“吃掉”而使有效数字位损失，从而影响计算结果的可靠性，

例1-9求一元二次方程$ax^2+bx+c=0$ 的根

解求一元二次方程的根可以使用公式

$$x_1\:=\frac{-b\:+\:\sqrt{b^2\:-4ac}}{2a}\quad x_2\:=\frac{-b\:-\:\sqrt{b^2\:-4ac}}{2a}$$

但是，如果$b^2$ 远远大于$|4ac|$ ，则在计算机上计算有可能有

$$\boxed{b^2-4ac}=\begin{array}{c|c}|&b\end{array}$$

$b^2$ “吃掉” $4ac$ ，从而使两个求根公式之一出现两个相近的数相减，使$x_1$ 或$x_2$ 损失有效数字位.从而使计算结果出现错误，

例如，在只有7位有效数字的计算机系统上使用求根公式解方程

$$x^2-(\:10^8+1\:)\:x+10^8=0$$

得到的两个根为$x_{1}= 10^{8}$ $, x_{2}= 0.$ x=0 $x_2=0$ 但$x_2$ 显然不是方程的根，

为避免这种错误的发生，可以修改求根公式为

$$x_1=\frac{-b-\mathrm{sign}(b)\quad\sqrt{b^2-4ac}}{2a}\quad x_2=\frac{c}{ax_1}$$

其中函数$\operatorname { sign} ($ $b$ ) 用来求$b$ 的符号.

按新的求根公式解方程

$$x^2-(\:10^8+1\:)\:x+10^8=0$$

得方程的两个准确根为$x_1=10^8,x_2=1$

1.5.0.3要注意减少运算的次数

对于一个计算问题，如果能减少运算次数，不仅能减少计算时间，提高运行速度，而且还可以减少误差的积累，提高计算结果准确性

例1-10计算$n$ 次多项式

$$p_n(x)=a_nx^n+a_{n-1}x^{n-1}+\cdots+a_1x+a_0$$

的值。

解假如按公式直接计算每一项$a_{i}x^{k}$ 后，再进行求和，就要进行

$$n+(\:n-1\:)\:+\cdots+2\:+1\:=\frac{n(\:n+1\:)}{2}$$

次乘法和$n$ 次加法计算.如果把原式改写为

$$p_{n}\left(\:x\:\right)\:=x\left(\:x\cdots\left(\:x\left(\:a_{n}x+a_{n-1}\:\right)\:+a_{n-2}\:\right)\:+\cdots\:+a_{1}\:\right)\:+a_{0}$$

则计算$n$ 次多项式的算法可以是

------------------------------------------------------------------

$$\begin{aligned}
&m_{\mathrm{n}}=a_{x} \\
&m_{i}=xm_{i+1}+a_{i}\quad(\:k=n-1\:,n-2\:,\cdots,1\:,0\:) \\
&p_{n}(\:x\:)\:=m_{0}
\end{aligned}$$

则计算$n$ 次多项式的值只需$n$ 次乘法和$n$ 次加法.

这个算法就是著名的秦九韶算法，

1.5.0.4避免做除数绝对值远远小于被除数绝对值的除法

很显然，用绝对值较小的数去除绝对值较大的数，得到的数一定会较大，有可能会产生溢出错误.如果不溢出，也有可能使舍人误差严重增大，导致最后结果不可靠.

例1-11求解方程组

$$\begin{array}{l}{0.\:000\:3x_{1}\:+3x_{2}\:=2.\:000\:1}\\\\{x_{1}\:+x_{2}\:=1}\end{array}$$

在计算过程中，按四舍五人原则取小数点后4位进行计算，

解容易验证,方程组的准确解为$x_1=\frac13,x_2=\frac23.$ 为求方程组的解,把第一个方程乘上-1/0.0003后加到第二个方程得

$$-999x_2=-6666$$

从而解得$x_2=0$ $x_2=0$ $x_2=0.6666\cdots\approx0.6667.$ 把$x_2$ 代人第一个方程求得$x_1=0$

这说明.在计算过程中，若按四舍五人原则取小数点后4位进行计算，用消元法得到的近似解与准确解相差较大.这是因为用较小的数作除数，使得在消元的过程中，方程组的一些元素的绝对值严重增长，增大了舍人误差的量级，在计算$x$ 时产生了较大的舍人误差，从而造成计算结果错误，

1.5.0.5要选择数值稳定的计算公式

定义1.6一种数值方法，若原始数据有误差，而在计算的过程中，由于舍人误差的传播，使得近似计算结果与准确值相差很大，则称这种数值方法是不稳定的.否则，在计算的过程中，若舍人误差得到控制，近似计算结果能逼近准确值，则称这种数值方法是稳定的，

例1-12给定I=xedx，试问用递推公式$I_{n}= 1- nI_{n- 1}($ $n= 1$ ,2 $, \cdots )$ 采用正向递推和逆向递推求$I_n$ 的值是否稳定?

解设$I_{x}$ 的近似值为$I_n^*$ ，则

$$\begin{aligned}I_{n}^{*}&=1-nI_{n-1}^{*}\\I_{n}-I_{n}^{*}&=-n(I_{n-1}-I_{n-1}^{*})\end{aligned}$$

从而有

对上式两边取绝对值得

$$\begin{array}{|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c}&I_{n}&-I_{n}^{*}&=n&I_{n-1}&-I_{n-1}^{*}&=n&(n-1)&|I_{n-2}-I_{n-2}^{*}&|&\cdots&=n!&|I_{0}-I_{0}^{*}|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&|&\end{array}$$

------------------------------------------------------------------

由此可知，按递推公式$I_n= 1- nI_{n- 1}($ $n= 1$ ,2 $, \cdots )$ 采用正向递推求$I_n$ 的值时， 误差传播逐步增大， $I_n$ 与$I_{_{N}}^{*}$ 的误差是$I_0$ 与$I_0^{\prime}$ 的误差的$n$ ！倍.这说明，按给定的递推公式采用正向递推计算$I_{\mathrm{u}}$ 的值是不稳定的.

由递推公式$I_{\kappa }= 1- nI_{\nu - 1}($ $n= 1$ ,2 $, \cdots )$ 有

$$I_{s-1}=\frac{1}{n}(1-I_{s})$$

若已知$I_n$ 的近似值为$I_n^{a}$ ，则$I_{x-1}$ 的近似值

$$I_{s-1}^{*}=\frac{1}{n}(1-I_{s}^{*})$$

将上两式相减得

$$I_{_{s-1}}-I_{_{s-1}}^{^{*}}=-\frac{1}{n}(I_{_{s}}-I_{_{s}}^{^{*}})$$

对上式两边取绝对值得

$$\mid I_{n-1}-I_{n-1}^*\mid=\frac{1}{n}\mid I_n-I_n^*\mid $$

这说明，按递推公式$I_n= 1- nI_{x- 1}($ $n= 1$ ,2 $, \cdots )$ 采用逆向递推求$I_n$ 的值时，误差传播逐步减少.因此，按给定的递推公式采用逆向递推计算$I_n$ 的值是稳定的

从例1-12可以看到，不稳定的数值方法会使误差变得越来越大.在实践中， 应当注意误差分析，避免使用不稳定的数值方法，

# 练习与思考

1.下列各数是按四舍五人原则得到的近似值.它们各自有多少位有效数字？ 它们的误差限和相对误差限为多少？

1123.4520.8350030.015410.008

2.已知近似数$x^{^{^{*}}}$ 的相对误差限为$0.5\%$ .问$x^{'}$ 至少有多少位有效数字？

3.给出某个正方形的边长约为100 cm ，当边长的误差不超过多少厘米时，才能保证其面积的误差不超过1 $cm^2?$

4.在真空中，自由落体运动距离$s$ 与时间$\iota$ 的函数关系为

$$s=\frac{1}{2}gt^2$$

其中$g$ 为重力加速度.假定$g$ 是准确的，而$\iota$ 的测量有$\pm0.1$ s的误差.试证明：当时间增加时，距离的误差增加，而相对误差却减少.

5.假设准确值$x$ 和$y$ 的近似值为$x^{\prime}=1.0048$ 和$y^{\prime}=0.253$ ，它们是经过四舍五人得到的.求$x^{\prime}+y^{\prime}$ -y $x^{\cdot}\times y^{\cdot}$ 和$|\frac xy^*$ 的误差限和相对误差限。

------------------------------------------------------------------

6.下面各数$x_{1}=1.21,x_{2}=0.05,x_{3}=10.380$ 是按四舍五人原则得到的近似值.试估计$x_1+x_2+x_3$ 和$x_1x_2x_3$ 的相对误差限

7.设有一个长方形的水池，经测量得知它的长为$50m$ ，宽为$25m$ ，深为$20m$ 它们的误差限都为0.01m .求该水池容积近似值的误差、误差限、相对误差和相对误差限.

8.已知求三角形面积公式为

$$S=\frac{1}{2}ab\mathrm{sin}c$$

其中$c$ 为弧度，0<c<.而且假定测量$a, b$ $, c$ 时的误差分别为$e(\begin{smallmatrix}a\end{smallmatrix}^{\prime})$ ， $e(\begin{smallmatrix}b\end{smallmatrix}^{\prime})$ 和$e($ $c\:^{* })$ .证明：三角形面积的误差$e(S^{\circ})$ 满足

$$\left|\frac{e(S^*)}{S}\right|\leqslant\left|\frac{e(a^*)}{a}\right|+\left|\frac{e(b^*)}{b}\right|+\left|\frac{e(c^*)}{c}\right|$$

9.给定如下公式，应如何变换公式使有效数字位增加？

（2）1+x-（x充分大） (1) $\frac{1-\cos x}{\sin x}$ (x接近于0)

$(3)\lg x-\lg y$ $x$ 接近于y）

10.假定$y_{N}$ 满足递推关系

$$y_{n}=10y_{n-1}-1\:(\:n=1\:,2\:,\cdots)$$

如果取$y_{0}$ = $\sqrt {2}$ = 1 . 4 1 ，试问用该递推公式求$y_{x}$ 的值是否稳定？要求写出详细根据.